!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.eSignPopUp=t():e.eSignPopUp=t()}(window,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,s=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function u(){u.init.call(this)}e.exports=u,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var h=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function p(e){return void 0===e._maxListeners?u.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var r,s,o,u;if(a(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=p(e))>0&&o.length>r&&!o.warned){o.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=o.length,u=h,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=l.bind(i);return r.listener=n,i.wrapFn=r,r}function d(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):g(r,r.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");h=e}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function(){return p(this)},u.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var h=r[e];if(void 0===h)return!1;if("function"==typeof h)s(h,this,t);else{var a=h.length,p=g(h,a);for(n=0;n<a;++n)s(p[n],this,t)}return!0},u.prototype.addListener=function(e,t){return c(this,e,t,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(e,t){return c(this,e,t,!0)},u.prototype.once=function(e,t){return a(t),this.on(e,f(this,e,t)),this},u.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,f(this,e,t)),this},u.prototype.removeListener=function(e,t){var n,i,r,s,o;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},u.prototype.listeners=function(e){return d(this,e,!0)},u.prototype.rawListeners=function(e){return d(this,e,!1)},u.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},u.prototype.listenerCount=v,u.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,n){"use strict";n.r(t),n.d(t,"OpenEsignPopUP",(function(){return o}));var i=n(0),r=n.n(i);class s extends r.a{constructor(){super(),this.bindMessageEvent=this.bindMessageEvent.bind(this),this.isMobile=this.isMobile.bind(this),this.EsignMessage=this.EsignMessage.bind(this),this.handleError=this.handleError.bind(this),this.handleSuccess=this.handleSuccess.bind(this),this.checkForWindowStatus=this.checkForWindowStatus.bind(this),this.startCheckingWinStatus=this.startCheckingWinStatus.bind(this),this.popupCenter=this.popupCenter.bind(this),this.popup=!1,this.defaultOptions={dimension:{height:850,width:450},toolbar:"no",location:"no",directories:"no",status:"no",menubar:"no",copyhistory:"no"},this.userCompletedSteps=!1}startCheckingWinStatus(){const e=this.checkForWindowStatus;this.handle=setInterval(e,5e3)}checkForWindowStatus(){const e=this.handle;if(this.popup.closed&&(clearInterval(e),!this.userCompletedSteps)){const e={data:{error:"POPUP_CLOSED"},status_code:433,message:"User closed the popup window before process completed",success:!1};this.emit("error",e)}}isMobile(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}handleSuccess(e){this.userCompletedSteps=!0,this.emit("success",e)}handleError(e){this.userCompletedSteps=!0,this.popup.close(),this.emit("error",e)}EsignMessage(e){try{const t=JSON.parse(e.data);console.log(t),200===t.status_code?this.handleSuccess(t):this.handleError(t)}catch(e){console.log(e)}}bindMessageEvent(){const e=this.EsignMessage;window.addEventListener("message",e,!1)}popupCenter(e,t){const n=window.screen.width/2-t.dimension.width/2,i=window.screen.height/2-t.dimension.height/2;this.popup=window.open(e,t.window_name,`toolbar=${t.toolbar},location=${t.location},directories=${t.directories},\n      status=${t.status},menubar=${t.menubar},copyhistory=${t.copyhistory},\n      width=${t.dimension.width},height=${t.dimension.height},top=${i},left=${n}`),window.focus&&this.popup.focus()}openWindow(e,t){const n={...this.defaultOptions,...t};if(this.popup||this.popup.closed)this.popup.focus();else if(e)if(this.isMobile())try{this.popup=window.open(e+"&mobile=true"),this.bindMessageEvent(),this.startCheckingWinStatus()}catch(e){this.emit("error","Couldn't open new Window")}else this.popupCenter(e,n),this.bindMessageEvent(),this.startCheckingWinStatus();else this.emit("error","Please provide a valid url")}}class o{constructor(e){this.Esign=new s,this.token=e.token,this.options=e}openWindow(e,t){const n=this.token,i=this.options,r=`https://esign-client.surepass.io/?token=${n}&window_name=${i.window_name?i.window_name:"SurePass eSign"}`;this.Esign.openWindow(r,i),this.Esign.on("error",e=>t(e)),this.Esign.on("success",t=>e(t))}}t.default=o}])}));