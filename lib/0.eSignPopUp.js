var eSignPopUp=(window.webpackJsonpeSignPopUp=window.webpackJsonpeSignPopUp||[]).push([[0],[function(s,t){s.exports=void 0},function(s,t,e){"use strict";e.r(t),e.d(t,"OpenEsignPopUP",(function(){return h}));var i=e(0),n=e.n(i);class o extends n.a{constructor(){super(),this.bindMessageEvent=this.bindMessageEvent.bind(this),this.isMobile=this.isMobile.bind(this),this.EsignMessage=this.EsignMessage.bind(this),this.handleError=this.handleError.bind(this),this.handleSuccess=this.handleSuccess.bind(this),this.checkForWindowStatus=this.checkForWindowStatus.bind(this),this.startCheckingWinStatus=this.startCheckingWinStatus.bind(this),this.popupCenter=this.popupCenter.bind(this),this.popup=!1,this.defaultOptions={height:850,width:450},this.userCompletedSteps=!1}startCheckingWinStatus(){const s=this.checkForWindowStatus;this.handle=setInterval(s,5e3)}checkForWindowStatus(){const s=this.handle;if(this.popup.closed&&(clearInterval(s),!this.userCompletedSteps)){const s={data:{error:"POPUP_CLOSED"},status_code:433,message:"User closed the popup window before process completed",success:!1};this.emit("error",s)}}isMobile(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}handleSuccess(s){this.userCompletedSteps=!0,this.popup.close(),this.emit("success",s)}handleError(s){this.userCompletedSteps=!0,this.popup.close(),this.emit("error",s)}EsignMessage(s){try{const t=JSON.parse(s.data);200===t.status?this.handleSuccess(t):this.handleError(t)}catch(s){console.log(s)}}bindMessageEvent(){const s=this.EsignMessage;window.addEventListener("message",s,!1)}popupCenter(s,t,e,i){const n=window.screen.width/2-e/2,o=window.screen.height/2-i/2;this.popup=window.open(s,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, copyhistory=no, width="+e+", height="+i+", top="+o+", left="+n),window.focus&&this.popup.focus()}openWindow(s,t,e){const i=e||this.defaultOptions;if(this.popup||this.popup.closed)this.popup.focus();else if(s)if(this.isMobile())try{this.popup=window.open(s+"&mobile=true"),this.bindMessageEvent(),this.startCheckingWinStatus()}catch(s){this.emit("error","Couldn't open new Window")}else this.popupCenter(s,t,i.width,i.height),this.bindMessageEvent(),this.startCheckingWinStatus();else this.emit("error","Please provide a valid url")}}class h{constructor(s){this.Esign=new o,this.token=s.token,this.windowName=s.window_name,this.options=s.dimension}openWindow(s,t){const e="https://esign-client.surepass.io/?token="+this.token;this.Esign.openWindow(e,this.windowName,this.options),this.Esign.on("error",s=>t(s)),this.Esign.on("success",t=>s(t))}}t.default=h}],[[1,1]]]);